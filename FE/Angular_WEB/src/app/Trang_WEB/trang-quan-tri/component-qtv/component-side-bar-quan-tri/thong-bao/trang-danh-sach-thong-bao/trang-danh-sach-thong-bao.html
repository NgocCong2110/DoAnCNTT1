<div class="container">
  <h2>Danh sách thông báo</h2>

  <div *ngIf="loading">Đang tải dữ liệu...</div>
  <div *ngIf="error" class="text-danger">{{ error }}</div>

  <div *ngIf="!loading && !error">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Mã thông báo</th>
          <th>Tiêu đề</th>
          <th>Nội dung</th>
          <th>Loại thông báo</th>
          <th>Tên người đăng</th>
          <th>Mã quản trị</th>
          <th>Mã công ty</th>
          <th>Ngày tạo</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tb of danh_sach_thong_bao">
          <td>{{ tb.ma_thong_bao }}</td>
          <td>{{ tb.tieu_de }}</td>
          <td>{{ tb.noi_dung }}</td>
          <td>{{ layLoaiHinh(tb.loai_thong_bao) }}</td>
          <td>{{ tb.cong_Ty?.ten_cong_ty || tb.quan_Tri?.ho_ten }}</td>
          <td>{{ tb.ma_quan_tri }}</td>
          <td>{{ tb.ma_cong_ty  }}</td>
          <td>{{ tb.ngay_tao  }}</td>
        </tr>
      </tbody>
    </table>

    <nav *ngIf="tongTrang > 1">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="trangHienTai === 1">
          <a class="page-link" (click)="chuyenTrang(trangHienTai - 1)">Trước</a>
        </li>
        <li class="page-item"
            *ngFor="let t of [].constructor(tongTrang); let i = index"
            [class.active]="trangHienTai === i + 1">
          <a class="page-link" (click)="chuyenTrang(i + 1)">{{ i + 1 }}</a>
        </li>
        <li class="page-item" [class.disabled]="trangHienTai === tongTrang">
          <a class="page-link" (click)="chuyenTrang(trangHienTai + 1)">Sau</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3" *ngIf="pop_up_lay_thong_tin_that_bai">
  <div class="toast show text-bg-danger border-0">
    <div class="d-flex">
      <div class="toast-body">
        ❌ Lấy thông tin thông báo thất bại!
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" (click)="pop_up_lay_thong_tin_that_bai=false"></button>
    </div>
  </div>
</div>
