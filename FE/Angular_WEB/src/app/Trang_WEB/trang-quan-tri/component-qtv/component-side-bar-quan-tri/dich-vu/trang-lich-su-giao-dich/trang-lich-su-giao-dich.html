<div class="container ds-thanhtoan-container">
    <h2 class="ds-thanhtoan-title">Lịch sử thanh toán</h2>

    <div *ngIf="loading">Đang tải dữ liệu...</div>
    <div *ngIf="error" class="text-danger">{{ error }}</div>

    <div *ngIf="!loading && !error">
        <table class="table table-bordered table-striped ds-thanhtoan-table">
            <thead class="ds-thanhtoan-thead">
                <tr>
                    <th>Mã thanh toán</th>
                    <th>Mã đơn hàng</th>
                    <th>Số tiền</th>
                    <th>Response code</th>
                    <th>Transaction no</th>
                    <th>Bank code</th>
                    <th>Ngày thanh toán</th>
                    <th>Trạng thái</th>
                    <th>Ngày tạo</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let thanh_toan of danh_sach_thanh_toan">
                    <td>{{ thanh_toan.ma_thanh_toan }}</td>
                    <td>{{ thanh_toan.ma_don_hang }}</td>
                    <td>{{ thanh_toan.so_tien | currency:'VND':'symbol' }}</td>
                    <td>{{ thanh_toan.response_code }}</td>
                    <td>{{ thanh_toan.transaction_no }}</td>
                    <td>{{ thanh_toan.bank_code }}</td>
                    <td>{{ thanh_toan.ngay_thanh_toan | date:'dd/MM/yyyy HH:mm' }}</td>
                    <td [ngClass]="{
      'text-success': thanh_toan.trang_thai_thanh_toan === 1,
      'text-danger': thanh_toan.trang_thai_thanh_toan === 2
    }">
                        {{ thanh_toan.trang_thai_thanh_toan }} -
                        {{ thanh_toan.trang_thai_thanh_toan === 1 ? 'Thành công' : 'Thất bại' }}
                    </td>
                    <td>{{ thanh_toan.ngay_tao | date:'dd/MM/yyyy HH:mm' }}</td>
                </tr>
            </tbody>
        </table>

        <nav *ngIf="tongTrang > 1">
            <ul class="pagination">
                <li class="page-item" [class.disabled]="trangHienTai === 1">
                    <a class="page-link" (click)="chuyenTrang(trangHienTai - 1)">Trước</a>
                </li>
                <li class="page-item" *ngFor="let t of [].constructor(tongTrang); let i = index"
                    [class.active]="trangHienTai === i + 1">
                    <a class="page-link" (click)="chuyenTrang(i + 1)">{{ i + 1 }}</a>
                </li>
                <li class="page-item" [class.disabled]="trangHienTai === tongTrang">
                    <a class="page-link" (click)="chuyenTrang(trangHienTai + 1)">Sau</a>
                </li>
            </ul>
        </nav>
    </div>
</div>