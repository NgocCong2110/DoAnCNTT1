<app-header-web></app-header-web>
<div class="cv-wrapper">
    <div class="cv-header">
        <div class="header-content">
            <div class="avatar-section">
                <div class="avatar" id="avatarPreview" (click)="chonAnhDaiDien()">
                    <img *ngIf="formCv.anh_dai_dien" [src]="formCv.anh_dai_dien" alt="Avatar" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                    <span *ngIf="!formCv.anh_dai_dien">Click để chọn ảnh</span>
                </div>
                <input type="file" #fileInput accept="image/*" (change)="onImageSelected($event)" style="display: none;">
            </div>

            <div class="basic-info">
                <h1>
                    <input type="text" [(ngModel)]="formCv.ho_ten" placeholder="Nhập họ tên" class="editable-input input-title">
                </h1>
                <div class="position">
                    <input type="text" [(ngModel)]="formCv.vi_tri_ung_tuyen" placeholder="Nhập vị trí ứng tuyển" class="editable-input">
                </div>

                <div class="contact-grid">
                    <div class="contact-item">
                        <input type="text" [(ngModel)]="formCv.dien_thoai" placeholder="0123 456 789" class="editable-input">
                    </div>
                    <div class="contact-item">
                        <input type="email" [(ngModel)]="formCv.email" placeholder="example@gmail.com" class="editable-input">
                    </div>
                    <div class="contact-item">
                        <input type="date" [(ngModel)]="formCv.ngay_sinh" class="editable-input">
                    </div>
                    <div class="contact-item">
                        <select [(ngModel)]="formCv.gioi_tinh" class="editable-input">
                            <option value="1">Nam</option>
                            <option value="2">Nữ</option>
                        </select>
                    </div>
                    <div class="contact-item" style="grid-column: 1 / -1;">
                        <input type="text" [(ngModel)]="formCv.dia_chi" placeholder="Quận Ninh Kiều, Cần Thơ" class="editable-input">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cv-body">
        <div class="section">
            <h2 class="section-title">Chuyên Ngành</h2>
            <input type="text" [(ngModel)]="formCv.chuyen_nganh" placeholder="Công nghệ thông tin - Lập trình Web" class="text-content editable-input">
        </div>

        <div class="section">
            <h2 class="section-title">Mục Tiêu Nghề Nghiệp</h2>
            <textarea [(ngModel)]="formCv.muc_tieu" placeholder="Nhập mục tiêu nghề nghiệp của bạn" class="text-content editable-textarea"></textarea>
        </div>

        <div class="section">
            <h2 class="section-title">Kỹ Năng</h2>
            <textarea [(ngModel)]="formCv.ky_nang" placeholder="Nhập ký năng hiện có của bạn" class="text-content editable-textarea"></textarea>
        </div>

        <div class="section">
            <h2 class="section-title">Học Vấn</h2>
            <div class="timeline-item" *ngFor="let hv of formCv.hoc_van; let i = index">
                <input type="text" [(ngModel)]="hv.thoi_gian_hoc_tap" placeholder="2019 - 2023" class="timeline-period editable-input">
                <input type="text" [(ngModel)]="hv.ten_truong" placeholder="Đại học Kỹ thuật Công nghệ Cần Thơ" class="timeline-title editable-input">
                <input type="text" [(ngModel)]="hv.nganh_hoc" placeholder="Công nghệ thông tin" class="timeline-subtitle editable-input">
                <textarea [(ngModel)]="hv.mo_ta" placeholder="Tốt nghiệp loại Giỏi, chuyên ngành Công nghệ thông tin..." class="timeline-desc editable-textarea"></textarea>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Kinh Nghiệm Làm Việc</h2>
            <div class="timeline-item" *ngFor="let kn of formCv.kinh_nghiem; let i = index">
                <input type="text" [(ngModel)]="kn.thoi_gian_lam_viec" placeholder="2023 - Hiện tại" class="timeline-period editable-input">
                <input type="text" [(ngModel)]="kn.ten_cong_ty" placeholder="Công ty TNHH ABC" class="timeline-title editable-input">
                <input type="text" [(ngModel)]="kn.vi_tri" placeholder="Lập trình viên Frontend" class="timeline-subtitle editable-input">
                <textarea [(ngModel)]="kn.mo_ta" placeholder="Phát triển giao diện người dùng với Angular..." class="timeline-desc editable-textarea"></textarea>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Dự Án Tiêu Biểu</h2>
            <textarea [(ngModel)]="formCv.du_an" placeholder="Mô tả các dự án tiêu biểu của bạn" class="text-content editable-textarea"></textarea>
        </div>

        <div class="btn-container">
            <button class="btn btn-primary" (click)="moPopupNhapTen()">Lưu CV</button>
        </div>

        <div class="popup-overlay" *ngIf="pop_up_nhap_ten_file">
            <div class="popup-box">
                <h3>Nhập tên CV</h3>
                <input type="text" [(ngModel)]="formCv.ten_cv" placeholder="VD: CV_FE_NguyenCong" class="w-100 popup-input" />

                <div class="popup-actions">
                    <button class="btn btn-success" (click)="xacNhanLuu()">Xác nhận</button>
                    <button class="btn btn-danger" (click)="dongPopup()">Hủy</button>
                </div>
            </div>
        </div>
    </div>
</div>