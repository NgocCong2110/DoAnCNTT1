<div class="card p-3 shadow-sm rounded-3" style="background-color: white;">
  <div class="d-flex flex-wrap gap-2">

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ nganh_nghe_label || 'Ngành nghề' }}
      </button>
      <ul class="dropdown-menu dropdown-scroll">
        <li *ngFor="let gia_tri of nganhNgheList">
          <button class="dropdown-item" type="button"
            (click)="nganh_nghe = gia_tri.value; nganh_nghe_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ dia_diem_label || 'Địa điểm' }}
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let gia_tri of diaDiemList">
          <button class="dropdown-item" type="button"
            (click)="dia_diem = gia_tri.value; dia_diem_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ muc_luong_label || 'Mức lương' }}
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let gia_tri of mucLuongList">
          <button class="dropdown-item" type="button"
            (click)="muc_luong = gia_tri.value; muc_luong_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ kinh_nghiem_label || 'Kinh nghiệm' }}
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let gia_tri of kinhNghiemList">
          <button class="dropdown-item" type="button"
            (click)="kinh_nghiem = gia_tri.value; kinh_nghiem_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ hinh_thuc_label || 'Hình thức' }}
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let gia_tri of hinhThucList">
          <button class="dropdown-item" type="button"
            (click)="hinh_thuc = gia_tri.value; hinh_thuc_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ vi_tri_label ||'Vị trí làm việc' }}
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let gia_tri of viTriList">
          <button class="dropdown-item" type="button" (click)="vi_tri = gia_tri.value; vi_tri_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div>

    <!-- <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ phuc_loi_label || 'Phúc lợi' }}
      </button>
      <ul class="dropdown-menu">
        <li *ngFor="let gia_tri of phucLoiList">
          <button class="dropdown-item" type="button" 
                  (click)="phuc_loi = gia_tri.value; phuc_loi_label = gia_tri.label">
            {{ gia_tri.label }}
          </button>
        </li>
      </ul>
    </div> -->



    <button class="btn btn-secondary px-4 flex-shrink-0 flex-start" (click)="locCongViec()"
      style="background-color: #0d6efd; color: white; font-weight: bold;">Lọc</button>
  </div>
</div>

<div *ngIf="!loading && danh_sach_de_xuat.length === 0" class="text-center text-muted mt-4">
  Không có việc làm đề xuất
</div>

<div *ngIf="error" class="text-center text-danger mb-3">
  {{ error }}
</div>

<div class="card p-3 shadow-sm rounded-3 mb-3" style="background-color: white;">
  <div class="d-flex gap-2 flex-wrap align-items-center">

    <span class="fw-bold me-2">Sắp xếp theo:</span>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ sap_xep_ngay_label || 'Ngày đăng tuyển' }}
      </button>
      <ul class="dropdown-menu">
        <li>
          <button class="dropdown-item" type="button" (click)="boLocNgay('moi_nhat'); sap_xep_ngay_label = 'Mới nhất'">
            Mới nhất
          </button>
        </li>
        <li>
          <button class="dropdown-item" type="button" (click)="boLocNgay('cu_nhat'); sap_xep_ngay_label = 'Cũ nhất'">
            Cũ nhất
          </button>
        </li>
      </ul>
    </div>

    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        {{ sap_xep_luong_label || 'Mức lương' }}
      </button>
      <ul class="dropdown-menu">
        <li>
          <button class="dropdown-item" type="button" (click)="boLocLuong('cao_Nhat'); sap_xep_luong_label = 'Cao nhất'">
            Cao nhất
          </button>
          <button class="dropdown-item" type="button" (click)="boLocLuong('thap_Nhat'); sap_xep_luong_label = 'Thấp nhất'">
            Thấp nhất
          </button>
        </li>
      </ul>
    </div>

  </div>
</div>

<div class="container py-4">
  <div class="row gy-4" *ngIf="toan_bo">
    <div class="col-12" *ngFor="let job of danh_sach_de_xuat">
      <div class="card job-card border rounded-4 p-4 d-flex flex-row align-items-center shadow-sm"
        style="min-height: 140px; background-color: white;">

        <div class="logo-wrapper d-flex align-items-center justify-content-center me-4">
          <img [src]="layDuongDanLogo(job.viec_lam?.cong_Ty?.logo)" alt="Logo công ty" class="img-fluid rounded"
            style="width: 90px; height: 90px; object-fit: contain;">
        </div>

        <div class="content-wrapper flex-grow-1">
          <h4 class="fw-bold text-dark mb-2">{{ job.viec_Lam?.tieu_de || job.tieu_de }}</h4>
          <p class="mb-2 text-muted fs-6">{{ job.ten_nguoi_dang }}</p>

          <div class="text-muted small d-flex flex-wrap gap-4 fs-6">
            <span class="text-danger fw-semibold fs-5">
              $ {{ job.viec_lam?.muc_luong }}/tháng
            </span>
            <span>{{ job.viec_lam?.dia_diem }}</span>
            <span>{{ job.viec_lam?.kinh_nghiem }}</span>
          </div>

          <div class="text-muted small mt-3">
            Cập nhật: {{ job.ngay_cap_nhat | date:'dd/MM/yyyy' }}
          </div>
        </div>

        <div class="button-wrapper ms-4">
          <button class="btn btn-primary px-4 py-2 rounded-pill" (click)="chiTietBaiDang(job.ma_bai_dang)">
            Xem chi tiết
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row gy-4" *ngIf="tung_phan">
    <div class="col-12" *ngFor="let job of danh_sach_de_xuat">
      <div class="card job-card border rounded-4 p-4 d-flex flex-row align-items-center shadow-sm"
        style="min-height: 140px; background-color: white;">

        <div class="logo-wrapper d-flex align-items-center justify-content-center me-4">
          <img [src]="layDuongDanLogo(job.viec_Lam?.cong_Ty?.logo)" alt="Logo công ty" class="img-fluid rounded"
            style="width: 90px; height: 90px; object-fit: contain;">
        </div>

        <div class="content-wrapper flex-grow-1">
          <h4 class="fw-bold text-dark mb-2">{{ job.viec_Lam?.tieu_de }}</h4>
          <p class="mb-2 text-muted fs-6">{{ job.viec_Lam?.cong_Ty?.ten_cong_ty }}</p>

          <div class="text-muted small d-flex flex-wrap gap-4 fs-6">
            <span class="text-danger fw-semibold fs-5">
              $ {{ job.viec_Lam?.muc_luong }}/tháng
            </span>
            <span>{{ job.viec_Lam?.dia_diem }}</span>
            <span>{{ job.viec_Lam?.kinh_nghiem }}</span>
          </div>

          <div class="text-muted small mt-3">
            Cập nhật: {{ job.viec_Lam?.ngay_cap_nhat | date:'dd/MM/yyyy' }}
          </div>
        </div>

        <div class="button-wrapper ms-4">
          <button class="btn btn-primary px-4 py-2 rounded-pill" (click)="chiTietBaiDang(job.ma_bai_dang)">
            Xem chi tiết
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row gy-4" *ngIf="de_xuat_thanh_tim_kiem">
    <div class="col-12" *ngFor="let job of danh_sach_de_xuat">
      <div class="card job-card border rounded-4 p-4 d-flex flex-row align-items-center shadow-sm"
        style="min-height: 140px; background-color: white;">

        <div class="logo-wrapper d-flex align-items-center justify-content-center me-4">
          <img [src]="layDuongDanLogo(job.cong_Ty?.logo)" alt="Logo công ty" class="img-fluid rounded"
            style="width: 90px; height: 90px; object-fit: contain;">
        </div>

        <div class="content-wrapper flex-grow-1">
          <h4 class="fw-bold text-dark mb-2">{{ job.tieu_de }}</h4>
          <p class="mb-2 text-muted fs-6">{{ job.cong_Ty?.ten_cong_ty }}</p>

          <div class="text-muted small d-flex flex-wrap gap-4 fs-6">
            <span class="text-danger fw-semibold fs-5">
              $ {{ job.muc_luong }}/tháng
            </span>
            <span>{{ job.dia_diem }}</span>
            <span>{{ job.kinh_nghiem }}</span>
          </div>

          <div class="text-muted small mt-3">
            Cập nhật: {{ job.ngay_cap_nhat | date:'dd/MM/yyyy' }}
          </div>
        </div>

        <div class="button-wrapper ms-4">
          <button class="btn btn-primary px-4 py-2 rounded-pill" (click)="chiTietBaiDang(job.ma_bai_dang)">
            Xem chi tiết
          </button>
        </div>
      </div>
    </div>
  </div>
</div>