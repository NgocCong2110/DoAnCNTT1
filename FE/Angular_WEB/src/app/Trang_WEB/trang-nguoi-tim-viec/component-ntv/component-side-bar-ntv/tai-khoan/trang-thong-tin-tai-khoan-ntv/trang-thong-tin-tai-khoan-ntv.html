<div class="tai-khoan-container">
  <section class="nguoi-tim-viec">
    <h2>Thông tin tài khoản</h2>
    <div class="card">
      <div class="card-header">
        <img [src]="thongTin?.anh_dai_dien || 'assets/avatar-default.png'" alt="Ảnh đại diện" class="avatar" />
        <div class="header-info">
          <h3>{{ thongTin?.ho_ten || 'Chưa cập nhật' }}</h3>
          <p><strong>Tên đăng nhập:</strong> {{ thongTin?.ten_dang_nhap }}</p>
          <p>
            <strong>Email:</strong> {{ thongTin?.email }}
            <button (click)="moForm('email')">✏️</button>
          </p>
        </div>
      </div>

      <div class="card-body grid-container">
        <div class="grid-item">
          <strong>Điện thoại:</strong> {{ thongTin?.dien_thoai || 'Chưa cập nhật' }}
          <button (click)="moForm('dien_thoai')">✏️</button>
        </div>

        <div class="grid-item">
          <strong>Ngày sinh:</strong>
          <span *ngIf="thongTin?.ngay_sinh && thongTin?.ngay_sinh !== '0001-01-01T00:00:00'">
            {{ thongTin?.ngay_sinh | date:'dd/MM/yyyy' }}
          </span>
          <span *ngIf="!thongTin?.ngay_sinh || thongTin?.ngay_sinh === '0001-01-01T00:00:00'">
            Chưa cập nhật
          </span>
          <button (click)="moForm('ngay_sinh')">✏️</button>
        </div>

        <div class="grid-item">
          <strong>Giới tính:</strong> {{ thongTin?.gioi_tinh_hien_thi || 'Chưa cập nhật' }}
          <button (click)="moForm('gioi_tinh')">✏️</button>
        </div>

        <div class="grid-item">
          <strong>Trình độ học vấn:</strong> {{ thongTin?.trinh_do_hoc_van_hien_thi || 'Chưa cập nhật' }}
          <button (click)="moForm('trinh_do_hoc_van')">✏️</button>
        </div>

        <div class="grid-item">
          <strong>Địa chỉ:</strong> {{ thongTin?.dia_chi || 'Chưa cập nhật' }}
          <button (click)="moForm('dia_chi')">✏️</button>
        </div>

        <div class="grid-item">
          <strong>Quốc tịch:</strong> {{ thongTin?.quoc_tich || 'Chưa cập nhật' }}
          <button (click)="moForm('quoc_tich')">✏️</button>
        </div>

        <div class="grid-item full-width">
          <strong>Mô tả:</strong> {{ thongTin?.mo_ta || 'Chưa cập nhật' }}
          <button (click)="moForm('mo_ta')">✏️</button>
        </div>
      </div>
    </div>
  </section>
</div>

<div class="popup" *ngIf="formDangMo">
  <form class="popup-form" (ngSubmit)="luuForm()">
    <h3>Chỉnh sửa {{ duLieuSua }}</h3>

    <ng-container [ngSwitch]="duLieuSua">
      <input *ngSwitchCase="'email'" [(ngModel)]="giaTriMoi" name="email" type="email" required />

      <input *ngSwitchCase="'dien_thoai'" [(ngModel)]="giaTriMoi" name="dien_thoai" />

      <input *ngSwitchCase="'ngay_sinh'" [(ngModel)]="giaTriMoi" name="ngay_sinh" type="date" />

      <select *ngSwitchCase="'gioi_tinh'" [(ngModel)]="giaTriMoi" name="gioi_tinh">
        <option [value]="0">Nam</option>
        <option [value]="1">Nữ</option>
        <option [value]="2">Khác</option>
      </select>

      <input *ngSwitchCase="'trinh_do_hoc_van'" [(ngModel)]="giaTriMoi" name="trinh_do_hoc_van" />

      <input *ngSwitchCase="'dia_chi'" [(ngModel)]="giaTriMoi" name="dia_chi" />

      <input *ngSwitchCase="'quoc_tich'" [(ngModel)]="giaTriMoi" name="quoc_tich" />

      <textarea *ngSwitchCase="'mo_ta'" [(ngModel)]="giaTriMoi" name="mo_ta"></textarea>

      <input *ngSwitchDefault [(ngModel)]="giaTriMoi" [name]="duLieuSua" />
    </ng-container>

    <div class="popup-actions">
      <button type="submit">Lưu</button>
      <button type="button" (click)="dongForm()">Hủy</button>
    </div>
  </form>
</div>