<div class="card-body py-2 px-3">
  <div class="d-flex flex-column gap-2">
    <input [(ngModel)]="tieu_de_moi" name="tieu_de" type="text"
      class="form-control border-0 border-bottom shadow-none py-1" placeholder="Tiêu đề tin tuyển dụng"
      style="font-size: 14px;">

    <div class="d-flex align-items-start gap-2">
      <img src="anh_WEB/anh_Logo.png" alt="avatar" class="rounded-circle" style="width:32px; height:32px;">
      <textarea [(ngModel)]="noi_dung_moi" name="noi_dung" class="form-control border-0 shadow-none py-1" rows="1"
        placeholder="Mô tả ngắn..." style="font-size: 14px; resize: none;"></textarea>
    </div>
  </div>

  <div class="d-flex justify-content-end mt-2" *ngIf="auth.layThongTinNguoiDung()?.kieu_nguoi_dung == 'cong_Ty' 
           || auth.layThongTinNguoiDung()?.kieu_nguoi_dung == 'quan_Tri_Vien'">
    <button class="btn d-flex align-items-center gap-1 px-3 py-1" (click)="moPopup()"
      style="background-color: #0d6efd; color: white; font-weight: bold; font-size: 13px; border-radius: 6px;">
      <span style="font-size: 14px;">+</span> Đăng bài
    </button>
  </div>
</div>

<div class="modal fade" tabindex="-1" id="modalDangBai" #modalDangBai>
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content" style="max-height: 90vh; overflow-y: auto;">
      <div class="modal-header">
        <h5 class="modal-title">Đăng tin tuyển dụng</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label>Tiêu đề</label>
            <input [(ngModel)]="tieu_de_moi" name="tieu_de" type="text" class="form-control"
              placeholder="Ví dụ: Tuyển lập trình viên Java">
          </div>

          <div class="mb-3">
            <label>Mô tả công việc</label>
            <textarea [(ngModel)]="noi_dung_moi" name="noi_dung" rows="3" class="form-control"
              placeholder="Mô tả ngắn gọn trách nhiệm và công việc..."></textarea>
          </div>

          <div class="mb-3">
            <label>Yêu cầu công việc</label>
            <textarea [(ngModel)]="yeu_cau_moi" name="yeu_cau" rows="3" class="form-control"
              placeholder="Trình độ, kỹ năng, kinh nghiệm..."></textarea>
          </div>

          <div class="mb-3">
            <label>Trình độ học vấn yêu cầu</label>
            <select [(ngModel)]="trinh_do_hoc_van" name="hoc_van" class="form-control">
              <option [value]="0">Không yêu cầu</option>
              <option *ngFor="let td of trinhDoHocVanList" [value]="td.value">
                {{ td.label }}
              </option>
            </select>
          </div>

          <div class="mb-3">
            <label>Địa điểm làm việc</label>
            <input [(ngModel)]="dia_diem_moi" name="dia_diem" type="text" class="form-control"
              placeholder="Ví dụ: Hà Nội, TP. HCM...">
          </div>

          <div class="mb-3">
            <label>Giờ làm việc</label>
            <input [(ngModel)]="gio_lam_viec" name="thoi_gian" type="text" class="form-control"
              placeholder="Ví dụ: Từ 8:00 đến 10:00">
          </div>

          <div class="mb-3">
            <label>Mức lương</label>
            <div class="dropdown w-100 mb-2">
              <button class="btn btn-outline-secondary w-100 text-start dropdown-toggle" type="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{ muc_luong_label || 'Mức lương' }}
              </button>
              <ul class="dropdown-menu dropdown-scroll w-100">
                <li *ngFor="let muc of mucLuongList">
                  <button class="dropdown-item" type="button" (click)="chonMucLuong(muc)">
                    {{ muc.label }}
                  </button>
                </li>
              </ul>
            </div>

            <div *ngIf="showCustomLuong" class="d-flex gap-2">
              <input type="number" [(ngModel)]="muc_luong_min" name="muc_luong_min" class="form-control" placeholder="Min (triệu)">
              <input type="number" [(ngModel)]="muc_luong_max" name="muc_luong_max"class="form-control" placeholder="Max (triệu)">
            </div>
          </div>

          <div class="mb-3">
            <label>Ngành nghề</label>
            <div class="dropdown w-100">
              <button class="btn btn-outline-secondary w-100 text-start dropdown-toggle" type="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{ nganh_nghe_label || 'Ngành nghề' }}
              </button>
              <ul class="dropdown-menu dropdown-scroll w-100">
                <li *ngFor="let nganh of nganhNgheList">
                  <button class="dropdown-item" type="button"
                    (click)="nganh_nghe = nganh.value; nganh_nghe_label = nganh.label">
                    {{ nganh.label }}
                  </button>
                </li>
              </ul>
            </div>
          </div>

          <div class="mb-3">
            <label>Vị trí tuyển dụng</label>
            <input [(ngModel)]="vi_tri" name="vi_tri" type="text" class="form-control"
              placeholder="Ví dụ: Nhân viên, Trưởng phòng, Quản lý...">
          </div>

          <div class="mb-3">
            <label>Kinh nghiệm</label>
            <div class="dropdown w-100">
              <button class="btn btn-outline-secondary w-100 text-start dropdown-toggle" type="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{ kinh_nghiem_label || 'Kinh nghiệm' }}
              </button>
              <ul class="dropdown-menu dropdown-scroll w-100">
                <li *ngFor="let kn of kinhNghiemList">
                  <button class="dropdown-item" type="button"
                    (click)="kinh_nghiem = kn.value; kinh_nghiem_label = kn.label">
                    {{ kn.label }}
                  </button>
                </li>
              </ul>
            </div>
          </div>

          <div class="mb-3">
            <label>Loại hình</label>
            <div class="dropdown w-100">
              <button class="btn btn-outline-secondary w-100 text-start dropdown-toggle" type="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{ loai_hinh_label || 'Loại hình' }}
              </button>
              <ul class="dropdown-menu dropdown-scroll w-100">
                <li *ngFor="let loai of loaiHinhList">
                  <button class="dropdown-item" type="button"
                    (click)="loai_hinh = loai.value; loai_hinh_label = loai.label">
                    {{ loai.label }}
                  </button>
                </li>
              </ul>
            </div>
          </div>

          <div class="mb-3">
            <label>Quyền lợi khác</label>
            <textarea [(ngModel)]="quyen_loi_khac" name="quyen_loi_khac" rows="3" class="form-control" placeholder="Nhập mỗi quyền lợi một dòng, ví dụ:
• Phụ cấp ăn trưa
• Lương tháng 13
• Thưởng Tết..."></textarea>
          </div>

          <div class="mb-3">
            <label>Phúc lợi</label>
            <div class="form-check" *ngFor="let phuc of phucLoiList">
              <input class="form-check-input" type="checkbox" [value]="phuc.ma_phuc_loi"
                (change)="chonPhucLoi($event, phuc)">
              <label class="form-check-label">{{ phuc.ten_phuc_loi }}</label>
            </div>
          </div>

          <div class="mb-3">
            <label>Thời hạn nộp cv</label>
            <input type="date" [(ngModel)]="thoi_han_nop_cv" name="thoi_han" placeholder="Thời gian hết hạn nộp cv"
              class="form-control">
          </div>

        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
        <button class="btn btn-primary" (click)="themBaiDang()"
          style="background-color: #0d6efd; color: white; font-weight: bold;">Đăng bài</button>
      </div>
    </div>
  </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3" *ngIf="pop_up_dang_bai_thanh_cong">
  <div class="toast show text-bg-success border-0">
    <div class="d-flex">
      <div class="toast-body">
        ✅ Đăng bài thành công!
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto"
        (click)="pop_up_dang_bai_thanh_cong=false"></button>
    </div>
  </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3" *ngIf="pop_up_dang_bai_that_bai">
  <div class="toast show text-bg-danger border-0">
    <div class="d-flex">
      <div class="toast-body">
        ❌ Đăng bài thất bại. Vui lòng thử lại!
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto"
        (click)="pop_up_dang_bai_that_bai=false"></button>
    </div>
  </div>
</div>